# CORS( cross origin resourse shring )
> 웹 브라우저의 보안 기능
> 서로 다른 도메인, 프로토콜, 포트 등 간의 데이터를 공유하는것을 제어한다.

## 웹 브라우저 보안 정책( same-origin policy )
> 요청을 보낼때 헤더의 내용의 출처가 허용된 도메인인지 검증을 해서 해결
> 같은 도메인의 출처가 아닌경우 데이터의 요청과 응답을 허용하지 않는다.

## cors의 구조
> 서버가 http 헤더를 사용해서 브라우저에게 특정 출처를 응답 메시지로 허용할지 여부를 알려준다.
> 두가지의 유형이 있는데 단순 요청, 프리플라이트 요청

### 단순 요청
> 요청 메서드가 get, post 두 요청

### 프리플라이트 요청(커스텀 헤더)
> 요청 메서드가 get, post가 아닌 이외의 모든 요청 메서드
> put, delete
> 브라우저가 실제로 데이터의 요청과 응답을 주고 받기 전에 사전 요청을 보내서 검증을하고 이후에 데이터를 주고받을수 있다.
> 응답 헤더에 허용할 출처와 메서드의 내용을 응답헤더로 브라우저에게 응답 메시지를 전달해준다.
> 브라우저는 출처가 허용된 도메인으로 요청과 응답을 처리할수 있는 상태가 된다.

### CORS 헤더
1. Origin : 클라이언트의 요청 출처
2. Access-Control-Allow-Origin : 서버의 응답으로 허용된 출처
3. Access-Control-Allow-Methods : 허용할 http 메서드
4. Access-control-Allow-Headers : 허용할 요청 헤더의 내용
5. Access-control-Allow-Credentials : 자격 증명이나 세션 쿠키 등을 헤더의 내용에 포함할수 있게 허용


### frontend 
> 사용자의 UI를 관리하는 API를 분리

### backend
> 단순한 데이터의 요청만 처리하는 API


### 중요한것
> 요청의 주체가 자바스크립트이면 프리플라이트 요청을 검증을 한뒤에 요청과 응답을 처리해야한다.
> 요청 주체가 어디인지 판단해야 로직을 직접 구현을 할수있다.
> 같은 도메인인일 경우는 프리플라이트 요청이 발생하지 않는다.
> 프론트 엔드 서버는 우리가 배포를 진행하는 서버이고 브라우저에 화면을 보여주는 도메인이 프론트엔드 서버
> 프론트 엔드에서 자바스크립트로 요청을 보낼때 프리플라이트 요청을 허용해서 사용하면 된다.

> 우리가 프리플라이트 요청이 발생하지 않는 이유는 SSR환경에서 서버간에 요청 응답을 처리하고 있기 때문에

> 리액트할때 리액트는 서버가 있을까요?
> 서버에서 html만 배포 CSR 자바스크립트 로직에서 axios로 요청을 보내면 허용이 된다.